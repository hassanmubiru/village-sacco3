"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(dashboard)/wallet/page",{

/***/ "(app-pages-browser)/./src/services/bitnob.service.ts":
/*!****************************************!*\
  !*** ./src/services/bitnob.service.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BitnobService: () => (/* binding */ BitnobService),\n/* harmony export */   bitnobService: () => (/* binding */ bitnobService),\n/* harmony export */   createBitnobService: () => (/* binding */ createBitnobService)\n/* harmony export */ });\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"(app-pages-browser)/./node_modules/next/dist/compiled/buffer/index.js\")[\"Buffer\"];\n/**\n * Bitnob Service - Blockchain integration for SACCO platform\n * Handles Bitcoin Lightning Network payments, wallet operations, and KYC\n */ class BitnobService {\n    async makeRequest(endpoint) {\n        let method = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 'GET', data = arguments.length > 2 ? arguments[2] : void 0;\n        try {\n            // Create timeout controller\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), 10000); // 10 second timeout\n            const response = await fetch(\"\".concat(this.baseURL).concat(endpoint), {\n                method,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': \"Bearer \".concat(this.config.apiKey),\n                    'Accept': 'application/json'\n                },\n                body: data ? JSON.stringify(data) : undefined,\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            if (!response.ok) {\n                const errorData = await response.json().catch(()=>({}));\n                throw new Error(\"Bitnob API Error: \".concat(response.status, \" - \").concat(errorData.message || response.statusText));\n            }\n            return await response.json();\n        } catch (error) {\n            console.error('Bitnob Service Error:', error);\n            // Handle specific network errors\n            if (error instanceof Error) {\n                if (error.message.includes('getaddrinfo ENOTFOUND') || error.message.includes('fetch failed')) {\n                    throw new Error('Bitnob service is currently unavailable. Please try again later.');\n                }\n                if (error.name === 'AbortError') {\n                    throw new Error('Bitnob service request timed out. Please try again.');\n                }\n            }\n            throw error;\n        }\n    }\n    // Check if Bitnob service is available\n    async isServiceAvailable() {\n        try {\n            // Check if API key is configured\n            if (!this.config.apiKey) {\n                console.warn('Bitnob API key not configured');\n                return false;\n            }\n            // Test with health endpoint\n            const response = await this.makeRequest('/health');\n            return response && response.status === 'ok';\n        } catch (error) {\n            console.error('Bitnob service availability check failed:', error);\n            return false;\n        }\n    }\n    // Test available endpoints\n    async testEndpoints() {\n        const endpoints = [\n            '/health',\n            '/ping',\n            '/wallets',\n            '/lightning/invoice',\n            '/lightning/send',\n            '/bitcoin/send',\n            '/rates'\n        ];\n        const results = {};\n        for (const endpoint of endpoints){\n            try {\n                const response = await fetch(\"\".concat(this.baseURL).concat(endpoint), {\n                    method: 'GET',\n                    headers: {\n                        'Authorization': \"Bearer \".concat(this.config.apiKey),\n                        'Content-Type': 'application/json'\n                    }\n                });\n                results[endpoint] = response.status !== 404;\n            } catch (error) {\n                results[endpoint] = false;\n            }\n        }\n        return results;\n    }\n    // Authentication and User Management\n    async createWallet(userData) {\n        try {\n            // First check if service is available\n            const isAvailable = await this.isServiceAvailable();\n            if (!isAvailable) {\n                throw new Error('Bitnob service is currently unavailable');\n            }\n            const response = await this.makeRequest('/wallets/create', 'POST', {\n                phoneNumber: userData.phoneNumber,\n                email: userData.email,\n                firstName: userData.firstName,\n                lastName: userData.lastName,\n                dateOfBirth: userData.dateOfBirth,\n                address: userData.address\n            });\n            return response.data;\n        } catch (error) {\n            console.error('Bitnob wallet creation error:', error);\n            throw new Error(\"Wallet creation failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    async getWalletDetails(walletId) {\n        try {\n            const response = await this.makeRequest(\"/wallets/\".concat(walletId));\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Failed to get wallet details: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    async getWalletBalance(walletId) {\n        try {\n            const response = await this.makeRequest(\"/wallets/\".concat(walletId, \"/balance\"));\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Balance inquiry failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    // Lightning Network Operations\n    async sendLightningPayment(paymentData) {\n        try {\n            const response = await this.makeRequest('/lightning/send', 'POST', {\n                amount: paymentData.amount,\n                currency: paymentData.currency,\n                recipientId: paymentData.recipientId,\n                phoneNumber: paymentData.phoneNumber,\n                email: paymentData.email,\n                reference: paymentData.reference,\n                narration: paymentData.narration || 'SACCO Platform Payment'\n            });\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Lightning payment failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    async createLightningInvoice(invoiceData) {\n        try {\n            const response = await this.makeRequest('/lightning/invoice', 'POST', {\n                amount: invoiceData.amount,\n                currency: invoiceData.currency,\n                reference: invoiceData.reference,\n                memo: invoiceData.memo || 'SACCO Platform Payment',\n                expiresIn: invoiceData.expiresIn || 3600\n            });\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Invoice creation failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    async payLightningInvoice(invoice, walletId) {\n        try {\n            const response = await this.makeRequest('/lightning/pay', 'POST', {\n                invoice,\n                walletId\n            });\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Invoice payment failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    // Bitcoin On-Chain Operations\n    async sendBitcoin(paymentData) {\n        try {\n            const response = await this.makeRequest('/bitcoin/send', 'POST', {\n                amount: paymentData.amount,\n                address: paymentData.address,\n                reference: paymentData.reference,\n                narration: paymentData.narration || 'SACCO Platform Payment'\n            });\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Bitcoin transaction failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    async generateBitcoinAddress(walletId) {\n        try {\n            const response = await this.makeRequest(\"/bitcoin/address/\".concat(walletId), 'POST');\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Address generation failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    // KYC Operations\n    async submitKYC(kycData) {\n        try {\n            // Note: File uploads would need FormData instead of JSON\n            const formData = new FormData();\n            Object.entries(kycData).forEach((param)=>{\n                let [key, value] = param;\n                if (value instanceof File) {\n                    formData.append(key, value);\n                } else if (value) {\n                    formData.append(key, value.toString());\n                }\n            });\n            const response = await fetch(\"\".concat(this.baseURL, \"/kyc/submit\"), {\n                method: 'POST',\n                headers: {\n                    'Authorization': \"Bearer \".concat(this.config.apiKey)\n                },\n                body: formData\n            });\n            if (!response.ok) {\n                const errorData = await response.json().catch(()=>({}));\n                throw new Error(\"KYC submission failed: \".concat(errorData.message || response.statusText));\n            }\n            const result = await response.json();\n            return result.data;\n        } catch (error) {\n            throw new Error(\"KYC submission failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    async getKYCStatus(userId) {\n        try {\n            const response = await this.makeRequest(\"/kyc/status/\".concat(userId));\n            return response.data;\n        } catch (error) {\n            throw new Error(\"KYC status check failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    // Currency Conversion\n    async convertBTCToFiat(conversionData) {\n        try {\n            const response = await this.makeRequest('/convert', 'POST', {\n                amount: conversionData.amount,\n                fromCurrency: conversionData.fromCurrency,\n                toCurrency: conversionData.toCurrency,\n                reference: conversionData.reference\n            });\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Conversion failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    async getExchangeRates() {\n        let baseCurrency = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 'BTC';\n        try {\n            const response = await this.makeRequest(\"/rates?base=\".concat(baseCurrency));\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Failed to get exchange rates: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    // Transaction History\n    async getTransactionHistory(walletId) {\n        let limit = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 50, offset = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;\n        try {\n            const response = await this.makeRequest(\"/transactions?walletId=\".concat(walletId, \"&limit=\").concat(limit, \"&offset=\").concat(offset));\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Failed to get transaction history: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    async getTransactionDetails(transactionId) {\n        try {\n            const response = await this.makeRequest(\"/transactions/\".concat(transactionId));\n            return response.data;\n        } catch (error) {\n            throw new Error(\"Failed to get transaction details: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    // Webhook verification (for backend use)\n    verifyWebhookSignature(payload, signature, secret) {\n        // Implementation would depend on Bitnob's webhook signature method\n        // This is a placeholder for the actual verification logic\n        try {\n            const crypto = __webpack_require__(/*! crypto */ \"(app-pages-browser)/./node_modules/next/dist/compiled/crypto-browserify/index.js\");\n            const expectedSignature = crypto.createHmac('sha256', secret).update(payload).digest('hex');\n            return crypto.timingSafeEqual(Buffer.from(signature, 'hex'), Buffer.from(expectedSignature, 'hex'));\n        } catch (error) {\n            console.error('Webhook signature verification failed:', error);\n            return false;\n        }\n    }\n    // Health check\n    async healthCheck() {\n        try {\n            const response = await this.makeRequest('/health');\n            return response;\n        } catch (error) {\n            throw new Error(\"Health check failed: \".concat(error instanceof Error ? error.message : 'Unknown error'));\n        }\n    }\n    constructor(config){\n        this.config = config;\n        this.baseURL = config.baseURL || (config.environment === 'production' ? 'https://api.bitnob.com' : 'https://sandboxapi.bitnob.com');\n    }\n}\n// Singleton instance for frontend use\nlet bitnobServiceInstance = null;\nfunction createBitnobService(config) {\n    if (!bitnobServiceInstance || config) {\n        const apiKey = \"hsk.d550cb2465fe.d92cf979e734a2baae0470a48\" || 0;\n        const serviceConfig = config || {\n            apiKey,\n            environment: \"sandbox\" || 0,\n            baseURL: \"https://sandboxapi.bitnob.co\"\n        };\n        // Warn if API key is missing\n        if (!apiKey) {\n            console.warn('Bitnob API key not configured. Bitcoin wallet features will be disabled.');\n        }\n        bitnobServiceInstance = new BitnobService(serviceConfig);\n    }\n    return bitnobServiceInstance;\n}\n// Default export for convenience\nconst bitnobService = createBitnobService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9iaXRub2Iuc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7OztDQUdDLEdBdURNLE1BQU1BO0lBWVgsTUFBY0MsWUFBWUMsUUFBZ0IsRUFBc0M7WUFBcENDLFNBQUFBLGlFQUFpQixPQUFPQztRQUNsRSxJQUFJO1lBQ0YsNEJBQTRCO1lBQzVCLE1BQU1DLGFBQWEsSUFBSUM7WUFDdkIsTUFBTUMsWUFBWUMsV0FBVyxJQUFNSCxXQUFXSSxLQUFLLElBQUksUUFBUSxvQkFBb0I7WUFFbkYsTUFBTUMsV0FBVyxNQUFNQyxNQUFNLEdBQWtCVCxPQUFmLElBQUksQ0FBQ1UsT0FBTyxFQUFZLE9BQVRWLFdBQVk7Z0JBQ3pEQztnQkFDQVUsU0FBUztvQkFDUCxnQkFBZ0I7b0JBQ2hCLGlCQUFpQixVQUE2QixPQUFuQixJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTTtvQkFDN0MsVUFBVTtnQkFDWjtnQkFDQUMsTUFBTVosT0FBT2EsS0FBS0MsU0FBUyxDQUFDZCxRQUFRZTtnQkFDcENDLFFBQVFmLFdBQVdlLE1BQU07WUFDM0I7WUFFQUMsYUFBYWQ7WUFFYixJQUFJLENBQUNHLFNBQVNZLEVBQUUsRUFBRTtnQkFDaEIsTUFBTUMsWUFBWSxNQUFNYixTQUFTYyxJQUFJLEdBQUdDLEtBQUssQ0FBQyxJQUFPLEVBQUM7Z0JBQ3RELE1BQU0sSUFBSUMsTUFBTSxxQkFBMENILE9BQXJCYixTQUFTaUIsTUFBTSxFQUFDLE9BQThDLE9BQXpDSixVQUFVSyxPQUFPLElBQUlsQixTQUFTbUIsVUFBVTtZQUNwRztZQUVBLE9BQU8sTUFBTW5CLFNBQVNjLElBQUk7UUFDNUIsRUFBRSxPQUFPTSxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBO1lBRXZDLGlDQUFpQztZQUNqQyxJQUFJQSxpQkFBaUJKLE9BQU87Z0JBQzFCLElBQUlJLE1BQU1GLE9BQU8sQ0FBQ0ksUUFBUSxDQUFDLDRCQUE0QkYs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QjtJQUN0QztBQWtVRjtBQUVBLHNDQUFzQztBQUN0QyxJQUFJQyx3QkFBOEM7QUFFM0MsU0FBU0Msb0JBQW9COUYsTUFBcUI7SUFDdkQsSUFBSSxDQUFDNkYseUJBQXlCN0YsUUFBUTtRQUNwQyxNQUFNQyxTQUFTOEYsNENBQXNDLElBQUksQ0FBRTtRQUMzRCxNQUFNRyxnQkFBZ0JsRyxVQUFVO1lBQzlCQztZQUNBMkYsYUFBYSxTQUEyQyxJQUFpQyxDQUFTO1lBQ2xHOUYsU0FBU2lHLDhCQUF1QztRQUNsRDtRQUVBLDZCQUE2QjtRQUM3QixJQUFJLENBQUM5RixRQUFRO1lBQ1hnQixRQUFRSSxJQUFJLENBQUM7UUFDZjtRQUVBd0Usd0JBQXdCLElBQUkzRyxjQUFjZ0g7SUFDNUM7SUFFQSxPQUFPTDtBQUNUO0FBRUEsaUNBQWlDO0FBQzFCLE1BQU1RLGdCQUFnQlAsc0JBQXNCIiwic291cmNlcyI6WyIvaG9tZS9lcnJvcjUxL2JpdG5vYi9wcm9qZWN0L3ZpbGxhZ2Utc2FjY28vc3JjL3NlcnZpY2VzL2JpdG5vYi5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQml0bm9iIFNlcnZpY2UgLSBCbG9ja2NoYWluIGludGVncmF0aW9uIGZvciBTQUNDTyBwbGF0Zm9ybVxuICogSGFuZGxlcyBCaXRjb2luIExpZ2h0bmluZyBOZXR3b3JrIHBheW1lbnRzLCB3YWxsZXQgb3BlcmF0aW9ucywgYW5kIEtZQ1xuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgQml0bm9iQ29uZmlnIHtcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIGVudmlyb25tZW50OiAnc2FuZGJveCcgfCAncHJvZHVjdGlvbic7XG4gIGJhc2VVUkw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2FsbGV0RGF0YSB7XG4gIHBob25lTnVtYmVyOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGZpcnN0TmFtZTogc3RyaW5nO1xuICBsYXN0TmFtZTogc3RyaW5nO1xuICBkYXRlT2ZCaXJ0aD86IHN0cmluZztcbiAgYWRkcmVzcz86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50RGF0YSB7XG4gIGFtb3VudDogbnVtYmVyO1xuICBjdXJyZW5jeTogc3RyaW5nO1xuICByZWNpcGllbnRJZD86IHN0cmluZztcbiAgcGhvbmVOdW1iZXI/OiBzdHJpbmc7XG4gIGVtYWlsPzogc3RyaW5nO1xuICByZWZlcmVuY2U6IHN0cmluZztcbiAgbmFycmF0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExpZ2h0bmluZ0ludm9pY2VEYXRhIHtcbiAgYW1vdW50OiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIHJlZmVyZW5jZTogc3RyaW5nO1xuICBtZW1vPzogc3RyaW5nO1xuICBleHBpcmVzSW4/OiBudW1iZXI7IC8vIHNlY29uZHNcbn1cblxuZXhwb3J0IGludGVyZmFjZSBLWUNEYXRhIHtcbiAgZmlyc3ROYW1lOiBzdHJpbmc7XG4gIGxhc3ROYW1lOiBzdHJpbmc7XG4gIGRhdGVPZkJpcnRoOiBzdHJpbmc7XG4gIHBob25lTnVtYmVyOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGFkZHJlc3M6IHN0cmluZztcbiAgaWRUeXBlOiAnbmluJyB8ICdwYXNzcG9ydCcgfCAnZHJpdmVyc19saWNlbnNlJztcbiAgaWROdW1iZXI6IHN0cmluZztcbiAgaWREb2N1bWVudD86IEZpbGU7XG4gIHByb29mT2ZBZGRyZXNzPzogRmlsZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJzaW9uRGF0YSB7XG4gIGFtb3VudDogbnVtYmVyO1xuICBmcm9tQ3VycmVuY3k6IHN0cmluZztcbiAgdG9DdXJyZW5jeTogc3RyaW5nO1xuICByZWZlcmVuY2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEJpdG5vYlNlcnZpY2Uge1xuICBwcml2YXRlIGNvbmZpZzogQml0bm9iQ29uZmlnO1xuICBwcml2YXRlIGJhc2VVUkw6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEJpdG5vYkNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuYmFzZVVSTCA9IGNvbmZpZy5iYXNlVVJMIHx8IFxuICAgICAgKGNvbmZpZy5lbnZpcm9ubWVudCA9PT0gJ3Byb2R1Y3Rpb24nIFxuICAgICAgICA/ICdodHRwczovL2FwaS5iaXRub2IuY29tJyBcbiAgICAgICAgOiAnaHR0cHM6Ly9zYW5kYm94YXBpLmJpdG5vYi5jb20nKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3QoZW5kcG9pbnQ6IHN0cmluZywgbWV0aG9kOiBzdHJpbmcgPSAnR0VUJywgZGF0YT86IGFueSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgdGltZW91dCBjb250cm9sbGVyXG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDEwMDAwKTsgLy8gMTAgc2Vjb25kIHRpbWVvdXRcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVUkx9JHtlbmRwb2ludH1gLCB7XG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5jb25maWcuYXBpS2V5fWAsXG4gICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogZGF0YSA/IEpTT04uc3RyaW5naWZ5KGRhdGEpIDogdW5kZWZpbmVkLFxuICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgfSk7XG5cbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCaXRub2IgQVBJIEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yRGF0YS5tZXNzYWdlIHx8IHJlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0JpdG5vYiBTZXJ2aWNlIEVycm9yOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIHNwZWNpZmljIG5ldHdvcmsgZXJyb3JzXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZ2V0YWRkcmluZm8gRU5PVEZPVU5EJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2ggZmFpbGVkJykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JpdG5vYiBzZXJ2aWNlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCaXRub2Igc2VydmljZSByZXF1ZXN0IHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayBpZiBCaXRub2Igc2VydmljZSBpcyBhdmFpbGFibGVcbiAgYXN5bmMgaXNTZXJ2aWNlQXZhaWxhYmxlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBBUEkga2V5IGlzIGNvbmZpZ3VyZWRcbiAgICAgIGlmICghdGhpcy5jb25maWcuYXBpS2V5KSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQml0bm9iIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IHdpdGggaGVhbHRoIGVuZHBvaW50XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9oZWFsdGgnKTtcbiAgICAgIHJldHVybiByZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgPT09ICdvayc7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0JpdG5vYiBzZXJ2aWNlIGF2YWlsYWJpbGl0eSBjaGVjayBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRlc3QgYXZhaWxhYmxlIGVuZHBvaW50c1xuICBhc3luYyB0ZXN0RW5kcG9pbnRzKCk6IFByb21pc2U8eyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0+IHtcbiAgICBjb25zdCBlbmRwb2ludHMgPSBbXG4gICAgICAnL2hlYWx0aCcsXG4gICAgICAnL3BpbmcnLCBcbiAgICAgICcvd2FsbGV0cycsXG4gICAgICAnL2xpZ2h0bmluZy9pbnZvaWNlJyxcbiAgICAgICcvbGlnaHRuaW5nL3NlbmQnLFxuICAgICAgJy9iaXRjb2luL3NlbmQnLFxuICAgICAgJy9yYXRlcydcbiAgICBdO1xuXG4gICAgY29uc3QgcmVzdWx0czogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7fTtcblxuICAgIGZvciAoY29uc3QgZW5kcG9pbnQgb2YgZW5kcG9pbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVSTH0ke2VuZHBvaW50fWAsIHtcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuY29uZmlnLmFwaUtleX1gLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzdWx0c1tlbmRwb2ludF0gPSByZXNwb25zZS5zdGF0dXMgIT09IDQwNDtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlc3VsdHNbZW5kcG9pbnRdID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvLyBBdXRoZW50aWNhdGlvbiBhbmQgVXNlciBNYW5hZ2VtZW50XG4gIGFzeW5jIGNyZWF0ZVdhbGxldCh1c2VyRGF0YTogV2FsbGV0RGF0YSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBGaXJzdCBjaGVjayBpZiBzZXJ2aWNlIGlzIGF2YWlsYWJsZVxuICAgICAgY29uc3QgaXNBdmFpbGFibGUgPSBhd2FpdCB0aGlzLmlzU2VydmljZUF2YWlsYWJsZSgpO1xuICAgICAgaWYgKCFpc0F2YWlsYWJsZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JpdG5vYiBzZXJ2aWNlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZScpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy93YWxsZXRzL2NyZWF0ZScsICdQT1NUJywge1xuICAgICAgICBwaG9uZU51bWJlcjogdXNlckRhdGEucGhvbmVOdW1iZXIsXG4gICAgICAgIGVtYWlsOiB1c2VyRGF0YS5lbWFpbCxcbiAgICAgICAgZmlyc3ROYW1lOiB1c2VyRGF0YS5maXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lOiB1c2VyRGF0YS5sYXN0TmFtZSxcbiAgICAgICAgZGF0ZU9mQmlydGg6IHVzZXJEYXRhLmRhdGVPZkJpcnRoLFxuICAgICAgICBhZGRyZXNzOiB1c2VyRGF0YS5hZGRyZXNzLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQml0bm9iIHdhbGxldCBjcmVhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFdhbGxldCBjcmVhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0V2FsbGV0RGV0YWlscyh3YWxsZXRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL3dhbGxldHMvJHt3YWxsZXRJZH1gKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgd2FsbGV0IGRldGFpbHM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0V2FsbGV0QmFsYW5jZSh3YWxsZXRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL3dhbGxldHMvJHt3YWxsZXRJZH0vYmFsYW5jZWApO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQmFsYW5jZSBpbnF1aXJ5IGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvLyBMaWdodG5pbmcgTmV0d29yayBPcGVyYXRpb25zXG4gIGFzeW5jIHNlbmRMaWdodG5pbmdQYXltZW50KHBheW1lbnREYXRhOiBQYXltZW50RGF0YSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9saWdodG5pbmcvc2VuZCcsICdQT1NUJywge1xuICAgICAgICBhbW91bnQ6IHBheW1lbnREYXRhLmFtb3VudCxcbiAgICAgICAgY3VycmVuY3k6IHBheW1lbnREYXRhLmN1cnJlbmN5LFxuICAgICAgICByZWNpcGllbnRJZDogcGF5bWVudERhdGEucmVjaXBpZW50SWQsXG4gICAgICAgIHBob25lTnVtYmVyOiBwYXltZW50RGF0YS5waG9uZU51bWJlcixcbiAgICAgICAgZW1haWw6IHBheW1lbnREYXRhLmVtYWlsLFxuICAgICAgICByZWZlcmVuY2U6IHBheW1lbnREYXRhLnJlZmVyZW5jZSxcbiAgICAgICAgbmFycmF0aW9uOiBwYXltZW50RGF0YS5uYXJyYXRpb24gfHwgJ1NBQ0NPIFBsYXRmb3JtIFBheW1lbnQnLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBMaWdodG5pbmcgcGF5bWVudCBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlTGlnaHRuaW5nSW52b2ljZShpbnZvaWNlRGF0YTogTGlnaHRuaW5nSW52b2ljZURhdGEpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvbGlnaHRuaW5nL2ludm9pY2UnLCAnUE9TVCcsIHtcbiAgICAgICAgYW1vdW50OiBpbnZvaWNlRGF0YS5hbW91bnQsXG4gICAgICAgIGN1cnJlbmN5OiBpbnZvaWNlRGF0YS5jdXJyZW5jeSxcbiAgICAgICAgcmVmZXJlbmNlOiBpbnZvaWNlRGF0YS5yZWZlcmVuY2UsXG4gICAgICAgIG1lbW86IGludm9pY2VEYXRhLm1lbW8gfHwgJ1NBQ0NPIFBsYXRmb3JtIFBheW1lbnQnLFxuICAgICAgICBleHBpcmVzSW46IGludm9pY2VEYXRhLmV4cGlyZXNJbiB8fCAzNjAwLCAvLyAxIGhvdXIgZGVmYXVsdFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZvaWNlIGNyZWF0aW9uIGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwYXlMaWdodG5pbmdJbnZvaWNlKGludm9pY2U6IHN0cmluZywgd2FsbGV0SWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9saWdodG5pbmcvcGF5JywgJ1BPU1QnLCB7XG4gICAgICAgIGludm9pY2UsXG4gICAgICAgIHdhbGxldElkLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZvaWNlIHBheW1lbnQgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEJpdGNvaW4gT24tQ2hhaW4gT3BlcmF0aW9uc1xuICBhc3luYyBzZW5kQml0Y29pbihwYXltZW50RGF0YTogUGF5bWVudERhdGEgJiB7IGFkZHJlc3M6IHN0cmluZyB9KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2JpdGNvaW4vc2VuZCcsICdQT1NUJywge1xuICAgICAgICBhbW91bnQ6IHBheW1lbnREYXRhLmFtb3VudCxcbiAgICAgICAgYWRkcmVzczogcGF5bWVudERhdGEuYWRkcmVzcyxcbiAgICAgICAgcmVmZXJlbmNlOiBwYXltZW50RGF0YS5yZWZlcmVuY2UsXG4gICAgICAgIG5hcnJhdGlvbjogcGF5bWVudERhdGEubmFycmF0aW9uIHx8ICdTQUNDTyBQbGF0Zm9ybSBQYXltZW50JyxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQml0Y29pbiB0cmFuc2FjdGlvbiBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2VuZXJhdGVCaXRjb2luQWRkcmVzcyh3YWxsZXRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL2JpdGNvaW4vYWRkcmVzcy8ke3dhbGxldElkfWAsICdQT1NUJyk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBZGRyZXNzIGdlbmVyYXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEtZQyBPcGVyYXRpb25zXG4gIGFzeW5jIHN1Ym1pdEtZQyhreWNEYXRhOiBLWUNEYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIE5vdGU6IEZpbGUgdXBsb2FkcyB3b3VsZCBuZWVkIEZvcm1EYXRhIGluc3RlYWQgb2YgSlNPTlxuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIE9iamVjdC5lbnRyaWVzKGt5Y0RhdGEpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSwgdmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVSTH0va3ljL3N1Ym1pdGAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5hcGlLZXl9YCxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgS1lDIHN1Ym1pc3Npb24gZmFpbGVkOiAke2Vycm9yRGF0YS5tZXNzYWdlIHx8IHJlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBLWUMgc3VibWlzc2lvbiBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0S1lDU3RhdHVzKHVzZXJJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL2t5Yy9zdGF0dXMvJHt1c2VySWR9YCk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBLWUMgc3RhdHVzIGNoZWNrIGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvLyBDdXJyZW5jeSBDb252ZXJzaW9uXG4gIGFzeW5jIGNvbnZlcnRCVENUb0ZpYXQoY29udmVyc2lvbkRhdGE6IENvbnZlcnNpb25EYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2NvbnZlcnQnLCAnUE9TVCcsIHtcbiAgICAgICAgYW1vdW50OiBjb252ZXJzaW9uRGF0YS5hbW91bnQsXG4gICAgICAgIGZyb21DdXJyZW5jeTogY29udmVyc2lvbkRhdGEuZnJvbUN1cnJlbmN5LFxuICAgICAgICB0b0N1cnJlbmN5OiBjb252ZXJzaW9uRGF0YS50b0N1cnJlbmN5LFxuICAgICAgICByZWZlcmVuY2U6IGNvbnZlcnNpb25EYXRhLnJlZmVyZW5jZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29udmVyc2lvbiBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0RXhjaGFuZ2VSYXRlcyhiYXNlQ3VycmVuY3k6IHN0cmluZyA9ICdCVEMnKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL3JhdGVzP2Jhc2U9JHtiYXNlQ3VycmVuY3l9YCk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IGV4Y2hhbmdlIHJhdGVzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRyYW5zYWN0aW9uIEhpc3RvcnlcbiAgYXN5bmMgZ2V0VHJhbnNhY3Rpb25IaXN0b3J5KHdhbGxldElkOiBzdHJpbmcsIGxpbWl0OiBudW1iZXIgPSA1MCwgb2Zmc2V0OiBudW1iZXIgPSAwKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChcbiAgICAgICAgYC90cmFuc2FjdGlvbnM/d2FsbGV0SWQ9JHt3YWxsZXRJZH0mbGltaXQ9JHtsaW1pdH0mb2Zmc2V0PSR7b2Zmc2V0fWBcbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHRyYW5zYWN0aW9uIGhpc3Rvcnk6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VHJhbnNhY3Rpb25EZXRhaWxzKHRyYW5zYWN0aW9uSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYC90cmFuc2FjdGlvbnMvJHt0cmFuc2FjdGlvbklkfWApO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCB0cmFuc2FjdGlvbiBkZXRhaWxzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFdlYmhvb2sgdmVyaWZpY2F0aW9uIChmb3IgYmFja2VuZCB1c2UpXG4gIHZlcmlmeVdlYmhvb2tTaWduYXR1cmUocGF5bG9hZDogc3RyaW5nLCBzaWduYXR1cmU6IHN0cmluZywgc2VjcmV0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiB3b3VsZCBkZXBlbmQgb24gQml0bm9iJ3Mgd2ViaG9vayBzaWduYXR1cmUgbWV0aG9kXG4gICAgLy8gVGhpcyBpcyBhIHBsYWNlaG9sZGVyIGZvciB0aGUgYWN0dWFsIHZlcmlmaWNhdGlvbiBsb2dpY1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkU2lnbmF0dXJlID0gY3J5cHRvXG4gICAgICAgIC5jcmVhdGVIbWFjKCdzaGEyNTYnLCBzZWNyZXQpXG4gICAgICAgIC51cGRhdGUocGF5bG9hZClcbiAgICAgICAgLmRpZ2VzdCgnaGV4Jyk7XG4gICAgICBcbiAgICAgIHJldHVybiBjcnlwdG8udGltaW5nU2FmZUVxdWFsKFxuICAgICAgICBCdWZmZXIuZnJvbShzaWduYXR1cmUsICdoZXgnKSxcbiAgICAgICAgQnVmZmVyLmZyb20oZXhwZWN0ZWRTaWduYXR1cmUsICdoZXgnKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignV2ViaG9vayBzaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gSGVhbHRoIGNoZWNrXG4gIGFzeW5jIGhlYWx0aENoZWNrKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9oZWFsdGgnKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBIZWFsdGggY2hlY2sgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxufVxuXG4vLyBTaW5nbGV0b24gaW5zdGFuY2UgZm9yIGZyb250ZW5kIHVzZVxubGV0IGJpdG5vYlNlcnZpY2VJbnN0YW5jZTogQml0bm9iU2VydmljZSB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQml0bm9iU2VydmljZShjb25maWc/OiBCaXRub2JDb25maWcpOiBCaXRub2JTZXJ2aWNlIHtcbiAgaWYgKCFiaXRub2JTZXJ2aWNlSW5zdGFuY2UgfHwgY29uZmlnKSB7XG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQklUTk9CX0FQSV9LRVkgfHwgJyc7XG4gICAgY29uc3Qgc2VydmljZUNvbmZpZyA9IGNvbmZpZyB8fCB7XG4gICAgICBhcGlLZXksXG4gICAgICBlbnZpcm9ubWVudDogKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JJVE5PQl9FTlZJUk9OTUVOVCBhcyAnc2FuZGJveCcgfCAncHJvZHVjdGlvbicpIHx8ICdzYW5kYm94JyxcbiAgICAgIGJhc2VVUkw6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JJVE5PQl9CQVNFX1VSTCxcbiAgICB9O1xuXG4gICAgLy8gV2FybiBpZiBBUEkga2V5IGlzIG1pc3NpbmdcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgY29uc29sZS53YXJuKCdCaXRub2IgQVBJIGtleSBub3QgY29uZmlndXJlZC4gQml0Y29pbiB3YWxsZXQgZmVhdHVyZXMgd2lsbCBiZSBkaXNhYmxlZC4nKTtcbiAgICB9XG5cbiAgICBiaXRub2JTZXJ2aWNlSW5zdGFuY2UgPSBuZXcgQml0bm9iU2VydmljZShzZXJ2aWNlQ29uZmlnKTtcbiAgfVxuXG4gIHJldHVybiBiaXRub2JTZXJ2aWNlSW5zdGFuY2U7XG59XG5cbi8vIERlZmF1bHQgZXhwb3J0IGZvciBjb252ZW5pZW5jZVxuZXhwb3J0IGNvbnN0IGJpdG5vYlNlcnZpY2UgPSBjcmVhdGVCaXRub2JTZXJ2aWNlKCk7XG4iXSwibmFtZXMiOlsiQml0bm9iU2VydmljZSIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnQiLCJtZXRob2QiLCJkYXRhIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlc3BvbnNlIiwiZmV0Y2giLCJiYXNlVVJMIiwiaGVhZGVycyIsImNvbmZpZyIsImFwaUtleSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidW5kZWZpbmVkIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0Iiwib2siLCJlcnJvckRhdGEiLCJqc29uIiwiY2F0Y2giLCJFcnJvciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJzdGF0dXNUZXh0IiwiZXJyb3IiLCJjb25zb2xlIiwiaW5jbHVkZXMiLCJuYW1lIiwiaXNTZXJ2aWNlQXZhaWxhYmxlIiwid2FybiIsInRlc3RFbmRwb2ludHMiLCJlbmRwb2ludHMiLCJyZXN1bHRzIiwiY3JlYXRlV2FsbGV0IiwidXNlckRhdGEiLCJpc0F2YWlsYWJsZSIsInBob25lTnVtYmVyIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImRhdGVPZkJpcnRoIiwiYWRkcmVzcyIsImdldFdhbGxldERldGFpbHMiLCJ3YWxsZXRJZCIsImdldFdhbGxldEJhbGFuY2UiLCJzZW5kTGlnaHRuaW5nUGF5bWVudCIsInBheW1lbnREYXRhIiwiYW1vdW50IiwiY3VycmVuY3kiLCJyZWNpcGllbnRJZCIsInJlZmVyZW5jZSIsIm5hcnJhdGlvbiIsImNyZWF0ZUxpZ2h0bmluZ0ludm9pY2UiLCJpbnZvaWNlRGF0YSIsIm1lbW8iLCJleHBpcmVzSW4iLCJwYXlMaWdodG5pbmdJbnZvaWNlIiwiaW52b2ljZSIsInNlbmRCaXRjb2luIiwiZ2VuZXJhdGVCaXRjb2luQWRkcmVzcyIsInN1Ym1pdEtZQyIsImt5Y0RhdGEiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsIkZpbGUiLCJhcHBlbmQiLCJ0b1N0cmluZyIsInJlc3VsdCIsImdldEtZQ1N0YXR1cyIsInVzZXJJZCIsImNvbnZlcnRCVENUb0ZpYXQiLCJjb252ZXJzaW9uRGF0YSIsImZyb21DdXJyZW5jeSIsInRvQ3VycmVuY3kiLCJnZXRFeGNoYW5nZVJhdGVzIiwiYmFzZUN1cnJlbmN5IiwiZ2V0VHJhbnNhY3Rpb25IaXN0b3J5IiwibGltaXQiLCJvZmZzZXQiLCJnZXRUcmFuc2FjdGlvbkRldGFpbHMiLCJ0cmFuc2FjdGlvbklkIiwidmVyaWZ5V2ViaG9va1NpZ25hdHVyZSIsInBheWxvYWQiLCJzaWduYXR1cmUiLCJzZWNyZXQiLCJjcnlwdG8iLCJyZXF1aXJlIiwiZXhwZWN0ZWRTaWduYXR1cmUiLCJjcmVhdGVIbWFjIiwidXBkYXRlIiwiZGlnZXN0IiwidGltaW5nU2FmZUVxdWFsIiwiQnVmZmVyIiwiZnJvbSIsImhlYWx0aENoZWNrIiwiZW52aXJvbm1lbnQiLCJiaXRub2JTZXJ2aWNlSW5zdGFuY2UiLCJjcmVhdGVCaXRub2JTZXJ2aWNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0JJVE5PQl9BUElfS0VZIiwic2VydmljZUNvbmZpZyIsIk5FWFRfUFVCTElDX0JJVE5PQl9FTlZJUk9OTUVOVCIsIk5FWFRfUFVCTElDX0JJVE5PQl9CQVNFX1VSTCIsImJpdG5vYlNlcnZpY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/bitnob.service.ts\n"));

/***/ })

});