(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8254],{2045:(e,s,t)=>{"use strict";t.d(s,{G:()=>n,j:()=>a});var r=t(3415);let a=()=>(0,r.wA)(),n=r.d4},4240:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(5155),a=t(2115),n=t(2045),l=t(3568);function i(){var e,s,t,i,o;let{user:c}=(0,n.G)(e=>e.auth),[d,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[C,k]=(0,a.useState)(null),[S,A]=(0,a.useState)([]),[M,_]=(0,a.useState)(null),[G,L]=(0,a.useState)([]),[D,B]=(0,a.useState)(""),[O,F]=(0,a.useState)(""),[I,E]=(0,a.useState)(!1),[U,T]=(0,a.useState)([]),[P,X]=(0,a.useState)([]),[q,z]=(0,a.useState)("my-groups"),[R,W]=(0,a.useState)(""),[J,Y]=(0,a.useState)({name:"",description:"",contributionAmount:"",contributionFrequency:"monthly",interestRate:"",maxMembers:""});(0,a.useEffect)(()=>{V()},[c]);let V=async()=>{if(!(null==c?void 0:c.id))return void console.log("No user ID available");console.log("Loading groups for user:",c.id);try{let e=await fetch("/api/sacco-groups?creatorId=".concat(c.id));console.log("Response status:",e.status);let s=await e.json();console.log("API response:",s),s.success?(console.log("Groups loaded:",s.data),T(s.data||[]),H(s.data||[])):(console.error("Error loading groups:",s.message),l.Ay.error("Failed to load SACCO groups"))}catch(e){console.error("Error loading groups:",e),l.Ay.error("Failed to load SACCO groups")}},H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{let t=await fetch("/api/sacco-groups"),r=await t.json();if(r.success){var s;let t=(null==(s=r.data)?void 0:s.filter(s=>!e.some(e=>e.id===s.id)))||[];X(t)}else console.error("Error loading all groups:",r.message)}catch(e){console.error("Error loading all groups:",e)}},Q=e=>R.trim()?e.filter(e=>{var s;return e.name.toLowerCase().includes(R.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(R.toLowerCase()))}):e,K=e=>{let{name:s,value:t}=e.target;Y(e=>({...e,[s]:t}))},Z=async e=>{if(e.preventDefault(),!(null==c?void 0:c.id))return void l.Ay.error("User not authenticated");E(!0);try{let e=await fetch("/api/sacco-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:J.name,description:J.description,contributionAmount:parseFloat(J.contributionAmount),contributionFrequency:J.contributionFrequency,interestRate:parseFloat(J.interestRate),maxMembers:parseInt(J.maxMembers),createdBy:c.id})}),s=await e.json();s.success?(l.Ay.success("SACCO group created successfully!"),m(!1),Y({name:"",description:"",contributionAmount:"",contributionFrequency:"monthly",interestRate:"",maxMembers:""}),V()):l.Ay.error(s.message||"Failed to create SACCO group")}catch(e){console.error("Error creating SACCO group:",e),l.Ay.error("Failed to create SACCO group")}finally{E(!1)}},$=e=>{k(e),u(!0)},ee=async e=>{if(!(null==c?void 0:c.id))return void l.Ay.error("Please log in to join a SACCO group");E(!0);try{var s,t;let r=await fetch("/api/sacco-groups/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupId:e.id,userId:c.id,userName:(null==(s=c.user_metadata)?void 0:s.full_name)||(null==(t=c.email)?void 0:t.split("@")[0])||"Unknown User",userEmail:c.email})}),a=await r.json();a.success?(l.Ay.success("Membership application submitted! Waiting for admin approval."),g(!1)):l.Ay.error(a.error||"Failed to apply for membership")}catch(e){console.error("Error applying for membership:",e),l.Ay.error("Failed to apply for membership")}finally{E(!1)}},es=async()=>{if(!C||!D||!(null==c?void 0:c.id))return void l.Ay.error("Please enter a valid deposit amount");E(!0);try{let e=await fetch("/api/bitnob/deposit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c.id,saccoGroupId:C.id,amount:parseFloat(D),currency:"UGX"})}),s=await e.json();s.success?(l.Ay.success("Deposit successful! Transaction is being processed via Bitnob."),B(""),b(!1)):l.Ay.error(s.message||"Deposit failed")}catch(e){console.error("Error processing deposit:",e),l.Ay.error("Deposit failed")}finally{E(!1)}},et=async e=>{try{let s=await fetch("/api/sacco-groups/join?groupId=".concat(e)),t=await s.json();t.success&&A(t.applications||[])}catch(e){console.error("Error loading applications:",e)}},er=async e=>{E(!0);try{let s=await fetch("/api/sacco-groups/approve-membership",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationId:e,approvedBy:null==c?void 0:c.id})}),t=await s.json();t.success?(l.Ay.success("Membership approved successfully!"),C&&et(C.id)):l.Ay.error(t.message||"Failed to approve membership")}catch(e){console.error("Error approving membership:",e),l.Ay.error("Failed to approve membership")}finally{E(!1)}},ea=async()=>{if(!C||!(null==c?void 0:c.id))return void l.Ay.error("Please select a SACCO group");E(!0);try{let e=await fetch("/api/bitnob/virtual-card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c.id,saccoGroupId:C.id})}),s=await e.json();s.success?l.Ay.success("Virtual card created successfully! You can now spend borderlessly."):l.Ay.error(s.message||"Failed to create virtual card")}catch(e){console.error("Error creating virtual card:",e),l.Ay.error("Failed to create virtual card")}finally{E(!1)}},en=async e=>{if(null==c?void 0:c.id)try{let s=await fetch("/api/savings?userId=".concat(c.id,"&groupId=").concat(e)),t=await s.json();t.success&&(_(t.savings),L(t.transactions||[]))}catch(e){console.error("Error loading personal savings:",e)}},el=async()=>{if(!C||!(null==c?void 0:c.id)||!O)return void l.Ay.error("Please enter a valid amount");let e=parseFloat(O);if(e<1e3)return void l.Ay.error("Minimum savings amount is UGX 1,000");E(!0);try{let s=await fetch("/api/savings/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c.id,groupId:C.id,amount:e,description:"Personal savings contribution of UGX ".concat(e.toLocaleString())})}),t=await s.json();t.success?(l.Ay.success("Savings added successfully!"),F(""),w(!1),en(C.id)):l.Ay.error(t.message||"Failed to add savings")}catch(e){console.error("Error adding savings:",e),l.Ay.error("Failed to add savings")}finally{E(!1)}},ei=async e=>{if(C&&(null==c?void 0:c.id)){E(!0);try{let s=await fetch("/api/savings/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c.id,groupId:C.id,amount:e,description:"Savings withdrawal of UGX ".concat(e.toLocaleString())})}),t=await s.json();t.success?(l.Ay.success("Withdrawal processed successfully!"),en(C.id)):l.Ay.error(t.message||"Failed to process withdrawal")}catch(e){console.error("Error processing withdrawal:",e),l.Ay.error("Failed to process withdrawal")}finally{E(!1)}}};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"SACCO Groups"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your savings and loan groups or discover new ones to join"})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[(0,r.jsxs)("button",{onClick:()=>z("my-groups"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("my-groups"===q?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:["My Groups (",U.length,")"]}),(0,r.jsxs)("button",{onClick:()=>z("discover"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("discover"===q?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:["Discover Groups (",P.length,")"]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search groups...",value:R,onChange:e=>W(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,r.jsx)("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,r.jsx)("button",{onClick:()=>m(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium whitespace-nowrap",children:"Create New Group"})]})]})}),d&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Create New SACCO Group"}),(0,r.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Name *"}),(0,r.jsx)("input",{type:"text",name:"name",value:J.name,onChange:K,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter group name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{name:"description",value:J.description,onChange:K,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe your SACCO group"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Contribution Amount (UGX) *"}),(0,r.jsx)("input",{type:"number",name:"contributionAmount",value:J.contributionAmount,onChange:K,required:!0,min:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10000"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contribution Frequency *"}),(0,r.jsxs)("select",{name:"contributionFrequency",value:J.contributionFrequency,onChange:K,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"weekly",children:"Weekly"}),(0,r.jsx)("option",{value:"monthly",children:"Monthly"}),(0,r.jsx)("option",{value:"quarterly",children:"Quarterly"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Rate (%) *"}),(0,r.jsx)("input",{type:"number",name:"interestRate",value:J.interestRate,onChange:K,required:!0,min:"0",max:"100",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 5.0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Members *"}),(0,r.jsx)("input",{type:"number",name:"maxMembers",value:J.maxMembers,onChange:K,required:!0,min:"5",max:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 50"})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:I,className:"flex-1 px-4 py-2 rounded-md text-white font-medium ".concat(I?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:I?"Creating...":"Create Group"})]})]})]})}),x&&C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:C.name}),(0,r.jsx)("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Basic Information"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Group Name:"}),(0,r.jsx)("span",{className:"text-gray-900",children:C.name})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Description:"}),(0,r.jsx)("span",{className:"text-gray-900 text-right max-w-xs",children:C.description||"No description provided"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Created:"}),(0,r.jsx)("span",{className:"text-gray-900",children:new Date(C.created_at).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Group ID:"}),(0,r.jsxs)("span",{className:"text-gray-500 text-sm font-mono",children:[C.id.slice(0,8),"..."]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Financial Details"}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Contribution Amount:"}),(0,r.jsxs)("span",{className:"font-bold text-blue-600",children:["UGX ",null==(e=C.contribution_amount)?void 0:e.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Frequency:"}),(0,r.jsx)("span",{className:"text-gray-900 capitalize",children:C.contribution_frequency})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Interest Rate:"}),(0,r.jsxs)("span",{className:"font-bold text-green-600",children:[C.interest_rate,"% per annum"]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Membership"}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Current Members:"}),(0,r.jsx)("span",{className:"font-bold text-green-600",children:C.current_members})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Maximum Members:"}),(0,r.jsx)("span",{className:"text-gray-900",children:C.max_members})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Available Slots:"}),(0,r.jsx)("span",{className:"text-gray-900",children:C.max_members-C.current_members})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(C.current_members/C.max_members*100,"%")}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[Math.round(C.current_members/C.max_members*100),"% full"]})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4 border-t",children:[(0,r.jsx)("button",{onClick:()=>u(!1),className:"flex-1 min-w-[120px] px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Close"}),(0,r.jsx)("button",{className:"flex-1 min-w-[120px] px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",onClick:()=>{g(!0)},children:"Join Group"}),(0,r.jsx)("button",{className:"flex-1 min-w-[120px] px-4 py-2 bg-green-700 text-white rounded-md hover:bg-green-800",onClick:()=>{b(!0)},children:"Deposit Money"}),(0,r.jsx)("button",{className:"flex-1 min-w-[120px] px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",onClick:()=>{et(C.id),j(!0)},children:"Manage Members"}),(0,r.jsx)("button",{className:"flex-1 min-w-[120px] px-4 py-2 bg-green-800 text-white rounded-md hover:bg-green-900",onClick:ea,disabled:I,children:I?"Creating...":"Get Virtual Card"}),(0,r.jsx)("button",{className:"flex-1 min-w-[120px] px-4 py-2 bg-green-400 text-white rounded-md hover:bg-green-500",onClick:()=>{en(C.id),v(!0)},children:"My Savings"})]})]})]})}),p&&C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Join ",C.name]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"Membership Benefits"}),(0,r.jsxs)("ul",{className:"text-sm text-green-700 space-y-1",children:[(0,r.jsxs)("li",{children:["• Monthly contribution: UGX ",null==(s=C.contribution_amount)?void 0:s.toLocaleString()]}),(0,r.jsxs)("li",{children:["• Interest rate: ",C.interest_rate,"% per annum"]}),(0,r.jsx)("li",{children:"• Access to loans and savings"}),(0,r.jsx)("li",{children:"• Bitnob virtual card for borderless spending"}),(0,r.jsx)("li",{children:"• Bitcoin-backed financial services"})]})]}),(0,r.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:"\uD83D\uDCCB Your application will be reviewed by the group admin. You'll be notified once approved."})})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-6",children:[(0,r.jsx)("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>ee(C),disabled:I,className:"flex-1 px-4 py-2 rounded-md text-white font-medium ".concat(I?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:I?"Applying...":"Apply to Join"})]})]})}),h&&C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Deposit to ",C.name]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"\uD83D\uDCB3 Bitnob Integration"}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"Secure deposits powered by Bitnob's Bitcoin infrastructure. Your funds are instantly converted and secured."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Amount (UGX) *"}),(0,r.jsx)("input",{type:"number",value:D,onChange:e=>B(e.target.value),min:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter amount to deposit"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum deposit: UGX 1,000"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Payment Methods"}),(0,r.jsxs)("div",{className:"flex space-x-2 text-xs",children:[(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Mobile Money"}),(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Bank Transfer"}),(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Bitcoin"})]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-6",children:[(0,r.jsx)("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:es,disabled:I||!D,className:"flex-1 px-4 py-2 rounded-md text-white font-medium ".concat(I||!D?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:I?"Processing...":"Deposit Now"})]})]})}),y&&C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Manage Members - ",C.name]}),(0,r.jsx)("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Pending Applications"}),S.length>0?(0,r.jsx)("div",{className:"space-y-3",children:S.filter(e=>"pending"===e.status).map(e=>(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.user_name||"Unknown User"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.user_email}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["Applied: ",new Date(e.applied_at).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>er(e.id),disabled:I,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:bg-gray-400",children:"Approve"}),(0,r.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",onClick:()=>{(0,l.Ay)("Reject functionality coming soon!")},children:"Reject"})]})]})},e.id))}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,r.jsx)("p",{children:"No pending applications"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Current Members"}),(0,r.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"font-medium text-green-800",children:[C.current_members," / ",C.max_members," members"]}),(0,r.jsxs)("span",{className:"text-sm text-green-600",children:[C.max_members-C.current_members," slots available"]})]})})]})]}),(0,r.jsx)("div",{className:"flex justify-end pt-6 border-t",children:(0,r.jsx)("button",{onClick:()=>j(!1),className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Done"})})]})}),f&&C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["My Savings - ",C.name]}),(0,r.jsx)("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCB0 Savings Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["UGX ",(null==M||null==(t=M.balance)?void 0:t.toLocaleString())||"0"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Current Balance"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["UGX ",(null==M||null==(i=M.total_contributions)?void 0:i.toLocaleString())||"0"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Saved"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-yellow-600",children:["UGX ",(null==M||null==(o=M.interest_earned)?void 0:o.toLocaleString())||"0"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Interest Earned"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-lg font-bold text-purple-600",children:[C.interest_rate,"%"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Interest Rate"})]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>w(!0),className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg font-medium flex items-center justify-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,r.jsx)("span",{children:"Add Savings"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=prompt("Enter withdrawal amount (UGX):");e&&!isNaN(Number(e))&&ei(Number(e))},disabled:!(null==M?void 0:M.balance)||M.balance<=0,className:"flex-1 px-4 py-3 rounded-lg font-medium flex items-center justify-center space-x-2 ".concat((null==M?void 0:M.balance)&&!(M.balance<=0)?"bg-orange-600 hover:bg-orange-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),(0,r.jsx)("span",{children:"Withdraw"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Recent Transactions"}),G.length>0?(0,r.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:G.slice(0,10).map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-full ".concat("deposit"===e.type?"bg-green-100 text-green-600":"withdrawal"===e.type?"bg-orange-100 text-orange-600":"bg-yellow-100 text-yellow-600"),children:"deposit"===e.type?"↗️":"withdrawal"===e.type?"↙️":"\uD83D\uDCB0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:e.type}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-bold ".concat("deposit"===e.type||"interest"===e.type?"text-green-600":"text-orange-600"),children:["withdrawal"===e.type?"-":"+","UGX ",e.amount.toLocaleString()]}),(0,r.jsx)("p",{className:"text-xs px-2 py-1 rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-600":"pending"===e.status?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"),children:e.status})]})]},e.id))}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,r.jsx)("p",{children:"No transactions yet. Start saving today!"})})]})]}),(0,r.jsx)("div",{className:"flex justify-end pt-6 border-t",children:(0,r.jsx)("button",{onClick:()=>v(!1),className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Close"})})]})}),N&&C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCB0 Add to Savings"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"Personal Savings Account"}),(0,r.jsxs)("p",{className:"text-sm text-green-700",children:["Build your personal savings within ",C.name,". Earn ",C.interest_rate,"% annual interest on your balance."]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Savings Amount (UGX) *"}),(0,r.jsx)("input",{type:"number",value:O,onChange:e=>F(e.target.value),min:"1000",step:"1000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Enter amount to save"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum savings: UGX 1,000"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCB3 Payment via Bitnob"}),(0,r.jsx)("p",{className:"text-sm text-blue-700 mb-2",children:"Secure payment powered by Bitnob's Bitcoin infrastructure"}),(0,r.jsxs)("div",{className:"flex space-x-2 text-xs",children:[(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Mobile Money"}),(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Bank Transfer"}),(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Bitcoin"})]})]}),M&&(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Current Savings"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Balance: ",(0,r.jsxs)("span",{className:"font-bold text-green-600",children:["UGX ",M.balance.toLocaleString()]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Interest Earned: ",(0,r.jsxs)("span",{className:"font-bold text-yellow-600",children:["UGX ",M.interest_earned.toLocaleString()]})]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-6",children:[(0,r.jsx)("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:el,disabled:I||!O,className:"flex-1 px-4 py-2 rounded-md text-white font-medium ".concat(I||!O?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:I?"Processing...":"Add Savings"})]})]})}),(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:"my-groups"===q?Q(U).length>0?Q(U).map(e=>{var s;return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Owner"})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-4 text-sm",children:e.description}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Members:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.current_members,"/",e.max_members]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Contribution:"}),(0,r.jsxs)("span",{className:"font-medium",children:["UGX ",null==(s=e.contribution_amount)?void 0:s.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Frequency:"}),(0,r.jsx)("span",{className:"font-medium capitalize",children:e.contribution_frequency})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Interest Rate:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.interest_rate,"%"]})]})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,r.jsx)("button",{onClick:()=>$(e),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Manage Group"})})]},e.id)}):(0,r.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 mb-4",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM9 9a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:R?"No groups match your search":"No SACCO groups yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:R?"Try a different search term.":"Create your first SACCO group to start saving together."}),!R&&(0,r.jsx)("button",{onClick:()=>m(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium",children:"Create Your First Group"})]}):Q(P).length>0?Q(P).map(e=>{var s;return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border hover:shadow-lg transition-shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.name}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:e.max_members-e.current_members>0?(0,r.jsxs)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:[e.max_members-e.current_members," slots left"]}):(0,r.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:"Full"})})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-4 text-sm",children:e.description}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Members:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.current_members,"/",e.max_members]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Contribution:"}),(0,r.jsxs)("span",{className:"font-medium",children:["UGX ",null==(s=e.contribution_amount)?void 0:s.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Frequency:"}),(0,r.jsx)("span",{className:"font-medium capitalize",children:e.contribution_frequency})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Interest Rate:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.interest_rate,"%"]})]})]}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>$(e),className:"flex-1 text-green-600 hover:text-green-700 text-sm font-medium border border-green-200 hover:border-green-300 py-2 px-3 rounded-md text-center transition-colors",children:"View Details"}),e.max_members-e.current_members>0&&(0,r.jsx)("button",{onClick:()=>{k(e),g(!0)},className:"flex-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-2 px-3 rounded-md text-center transition-colors",children:"Join Group"})]})]},e.id)}):(0,r.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 mb-4",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:R?"No groups match your search":"No groups available to join"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:R?"Try a different search term or create a new group.":"Be the first to create a SACCO group in your community!"}),(0,r.jsx)("button",{onClick:()=>m(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium",children:"Create New Group"})]})})]})}},5005:(e,s,t)=>{Promise.resolve().then(t.bind(t,4240))}},e=>{e.O(0,[3415,3568,8441,5964,7358],()=>e(e.s=5005)),_N_E=e.O()}]);