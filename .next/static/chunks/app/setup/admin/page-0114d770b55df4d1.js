(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2104],{4219:(e,s,a)=>{Promise.resolve().then(a.bind(a,4242))},4242:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var t=a(5155),r=a(2115),l=a(5695);function n(){let[e,s]=(0,r.useState)({email:"",name:"",phone:"",password:"",setupKey:""}),[a,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),[i,m]=(0,r.useState)(!1),c=(0,l.useRouter)(),u=async s=>{s.preventDefault(),n(!0),d("");try{let s=await fetch("/api/setup/admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();s.ok?(m(!0),d(a.message),setTimeout(()=>{c.push("/login")},3e3)):d(a.message||"Setup failed")}catch(e){d("Network error. Please try again.")}finally{n(!1)}},x=e=>{s(s=>({...s,[e.target.name]:e.target.value}))};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Village SACCO Admin Setup"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Create the first admin user for your platform"})]})}),(0,t.jsxs)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[(0,t.jsx)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:i?(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-green-100 p-4 mx-auto w-16 h-16 flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Setup Complete!"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:o}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Redirecting to login page in 3 seconds..."})]}):(0,t.jsxs)("form",{className:"space-y-6",onSubmit:u,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:e.email,onChange:x,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"admin@example.com"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:e.name,onChange:x,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Admin User"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"phone",name:"phone",type:"tel",required:!0,value:e.phone,onChange:x,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"+256700000000"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:e.password,onChange:x,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Minimum 6 characters"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"setupKey",className:"block text-sm font-medium text-gray-700",children:"Setup Key"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{id:"setupKey",name:"setupKey",type:"password",required:!0,value:e.setupKey,onChange:x,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter setup key"})}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Default: village-sacco-setup-2024 (or set ADMIN_SETUP_KEY in env)"})]}),o&&(0,t.jsx)("div",{className:"rounded-md p-4 ".concat(i?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:(0,t.jsx)("p",{className:"text-sm",children:o})}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creating Admin...":"Create Admin User"})})]})}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["This setup page will only work if no admin users exist yet.",(0,t.jsx)("br",{}),"After setup, use the regular login page to access the admin dashboard."]})})]})]})}},5695:(e,s,a)=>{"use strict";var t=a(8999);a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=4219)),_N_E=e.O()}]);